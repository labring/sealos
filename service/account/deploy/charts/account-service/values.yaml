# Default values for account service helm chart

replicaCount: 1

image: ghcr.io/labring/sealos-account-service:latest
imagePullPolicy: Always

imagePullSecrets: []
nameOverride: ""
fullnameOverride: "account-service"

serviceAccount:
  create: false
  annotations: {}
  name: ""

podAnnotations: {}
podLabels: {}

podSecurityContext: {}
  # runAsNonRoot: true
  # runAsUser: 1000

securityContext: {}
  # allowPrivilegeEscalation: false
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true

service:
  type: ClusterIP
  port: 2333

resources:
  limits:
    cpu: 500m
    memory: 256Mi
  requests:
    cpu: 50m
    memory: 25Mi

livenessProbe:
  httpGet:
    path: /health
    port: 2333
  initialDelaySeconds: 3
  periodSeconds: 10

readinessProbe:
  httpGet:
    path: /health
    port: 2333
  initialDelaySeconds: 3
  periodSeconds: 5
  failureThreshold: 6

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 1
  targetCPUUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}

# Service account for the pod (using existing account-controller-manager service account)
serviceAccountName: account-controller-manager

# ConfigMap for environment variables
envConfigMapName: account-manager-env

# Secret for payment configuration
paymentSecretName: payment-secret

# ConfigMap for region info
regionInfoConfigMapName: region-info

# RBAC configuration
rbac:
  # Whether to create ClusterRole and ClusterRoleBinding for node viewing
  create: true

# ============================================================================
# Auto-configured Ingress values (from sealos-system/sealos-config ConfigMap)
# ============================================================================
# The following ingress values are automatically fetched from the
# sealos-system/sealos-config ConfigMap by the entrypoint script and will
# override any values set here. These are provided as reference defaults.
#
# To override these auto-configured values, use HELM_OPTIONS or modify the
# sealos-config ConfigMap directly.
# ============================================================================

# Ingress configuration
ingress:
  enabled: true
  # Ingress class (nginx, higress, etc.)
  class: nginx
  # Cloud domain (will be used to generate ingress hostname)
  # Auto-fetched from sealos-config.cloudDomain
  cloudDomain: ""
  # Cloud port (optional, will be included in CORS and CSP headers if set)
  # Auto-fetched from sealos-config.cloudPort
  cloudPort: ""
  # Custom ingress hostname (default: account-api.<cloudDomain>)
  hostname: ""
  # TLS configuration
  tls:
    enabled: true
    secretName: "wildcard-cert"

# End of auto-configured ingress values
# ============================================================================
